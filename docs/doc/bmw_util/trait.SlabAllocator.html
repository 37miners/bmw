<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="This trait defines the public interface to the [`crate::SlabAllocator`]. The slab allocator is used by the other data structures in this crate to avoid dynamic heap allocations. By itself, the slab allocator is fairly simple. It only allocates and frees slabs. [`crate::SlabAllocator::get`] and [`crate::SlabAllocator::get_mut`] are also provided to obtain immutable and mutable references to a slab respectively. They only contain references to the data and not copies."><meta name="keywords" content="rust, rustlang, rust-lang, SlabAllocator"><title>SlabAllocator in bmw_util - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../bmw_util/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../bmw_util/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"><a href="#">SlabAllocator</a></h2><div class="sidebar-elems"><section><div class="block"><h3 class="sidebar-title"><a href="#required-methods">Required Methods</a></h3><ul><li><a href="#tymethod.allocate">allocate</a></li><li><a href="#tymethod.free">free</a></li><li><a href="#tymethod.free_count">free_count</a></li><li><a href="#tymethod.get">get</a></li><li><a href="#tymethod.get_mut">get_mut</a></li><li><a href="#tymethod.init">init</a></li><li><a href="#tymethod.slab_count">slab_count</a></li><li><a href="#tymethod.slab_size">slab_size</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#trait-implementations">Trait Implementations</a></h3><ul><li><a href="#impl-Clone">Clone</a></li><li><a href="#impl-Clone-1">Clone</a></li><li><a href="#impl-Clone-2">Clone</a></li><li><a href="#impl-Clone-3">Clone</a></li></ul></div><div class="block"><h3 class="sidebar-title"><a href="#implementors">Implementors</a></h3></div></section><h2 class="location"><a href="index.html">In bmw_util</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../bmw_util/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Trait <a href="index.html">bmw_util</a>::<wbr><a class="trait" href="#">SlabAllocator</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/bmw_util/types.rs.html#554-726">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><pre class="rust trait"><code>pub trait SlabAllocator: <a class="trait" href="../dyn_clone/trait.DynClone.html" title="trait dyn_clone::DynClone">DynClone</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/fmt/trait.Debug.html" title="trait core::fmt::Debug">Debug</a> {
    fn <a href="#tymethod.allocate" class="fnname">allocate</a>&lt;'a&gt;(&amp;'a mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SlabMut.html" title="struct bmw_util::SlabMut">SlabMut</a>&lt;'a&gt;, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.free" class="fnname">free</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get" class="fnname">get</a>&lt;'a&gt;(&amp;'a self, id: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.Slab.html" title="struct bmw_util::Slab">Slab</a>&lt;'a&gt;, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.get_mut" class="fnname">get_mut</a>&lt;'a&gt;(&amp;'a mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SlabMut.html" title="struct bmw_util::SlabMut">SlabMut</a>&lt;'a&gt;, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.free_count" class="fnname">free_count</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.slab_size" class="fnname">slab_size</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.slab_count" class="fnname">slab_count</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.init" class="fnname">init</a>(&amp;mut self, config: <a class="struct" href="struct.SlabAllocatorConfig.html" title="struct bmw_util::SlabAllocatorConfig">SlabAllocatorConfig</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;;
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>This trait defines the public interface to the <a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a>. The slab
allocator is used by the other data structures in this crate to avoid dynamic heap
allocations. By itself, the slab allocator is fairly simple. It only allocates and frees
slabs. <a href="trait.SlabAllocator.html#tymethod.get" title="crate::SlabAllocator::get"><code>crate::SlabAllocator::get</code></a> and <a href="trait.SlabAllocator.html#tymethod.get_mut" title="crate::SlabAllocator::get_mut"><code>crate::SlabAllocator::get_mut</code></a> are also
provided to obtain immutable and mutable references to a slab respectively. They only
contain references to the data and not copies.</p>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code> <span class="kw">use</span> <span class="ident">bmw_err</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::slab_allocator</span>;
 <span class="kw">use</span> <span class="ident">std::cell</span>::{<span class="ident">RefMut</span>,<span class="ident">Ref</span>};

 <span class="kw">fn</span> <span class="ident">main</span>() -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Error</span><span class="op">&gt;</span> {
     <span class="comment">// build a slab allocator, in this case with defaults</span>
     <span class="kw">let</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="macro">slab_allocator!</span>()<span class="question-mark">?</span>;

     <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> {
         <span class="comment">// slab allocator is stored in an Rc&lt;RefCell&gt;. This allows for it to be used by</span>
         <span class="comment">// multiple data structures at the same time.</span>
         <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span>: <span class="ident">RefMut</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">borrow_mut</span>();
         <span class="comment">// allocate a slab. [`crate::SlabAllocator::allocate`] returns [`crate::SlabMut`]</span>
         <span class="comment">// which contains a mutable reference to the underlying data in the slab.</span>
         <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">allocate</span>()<span class="question-mark">?</span>;

         <span class="comment">// get the id for this slab</span>
         <span class="kw">let</span> <span class="ident">id</span> <span class="op">=</span> <span class="ident">slab</span>.<span class="ident">id</span>();
         <span class="comment">// get_mut returns a mutable reference to the data in owned by the</span>
         <span class="comment">// [`crate::SlabAllocator`]</span>
         <span class="ident">slab</span>.<span class="ident">get_mut</span>()[<span class="number">0</span>] <span class="op">=</span> <span class="number">101</span>;
         <span class="ident">id</span>
     };

     <span class="comment">// borrow, this time with a Ref instead of refmut since it&#39;s an immutable call.</span>
     <span class="kw">let</span> <span class="ident">slabs</span>: <span class="ident">Ref</span><span class="op">&lt;</span><span class="kw">_</span><span class="op">&gt;</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">borrow</span>();
     <span class="comment">// now we can get an immutable reference to this slab</span>
     <span class="kw">let</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">get</span>(<span class="ident">id</span>)<span class="question-mark">?</span>;
     <span class="macro">assert_eq!</span>(<span class="ident">slab</span>.<span class="ident">get</span>()[<span class="number">0</span>], <span class="number">101</span>);

     <span class="prelude-val">Ok</span>(())
 }</code></pre></div>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle" open><summary><div id="tymethod.allocate" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#563">source</a></div><h4 class="code-header">fn <a href="#tymethod.allocate" class="fnname">allocate</a>&lt;'a&gt;(&amp;'a mut self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SlabMut.html" title="struct bmw_util::SlabMut">SlabMut</a>&lt;'a&gt;, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Allocate a slab and return a <a href="struct.SlabMut.html" title="crate::SlabMut"><code>crate::SlabMut</code></a> on success.
On failure, return an <a href="../bmw_err/error/struct.Error.html" title="bmw_err::Error"><code>bmw_err::Error</code></a>.</p>
<ul>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.IllegalState" title="bmw_err::ErrorKind::IllegalState"><code>bmw_err::ErrorKind::IllegalState</code></a> if the <a href="trait.SlabAllocator.html#tymethod.init" title="crate::SlabAllocator::init"><code>crate::SlabAllocator::init</code></a>
function has not been called.</p>
</li>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.CapacityExceeded" title="bmw_err::ErrorKind::CapacityExceeded"><code>bmw_err::ErrorKind::CapacityExceeded</code></a> if the capacity of this
<a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a> has been exceeded.</p>
</li>
</ul>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.free" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#612">source</a></div><h4 class="code-header">fn <a href="#tymethod.free" class="fnname">free</a>(&amp;mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Free a slab that has previously been allocated by this slab allocator.
<code>id</code> is the id of the slab to free. It can be obtained through the
<a href="struct.SlabMut.html#method.id" title="crate::SlabMut::id"><code>crate::SlabMut::id</code></a> or <a href="struct.Slab.html#method.id" title="crate::Slab::id"><code>crate::Slab::id</code></a> function. Return a
<a href="../bmw_err/error/struct.Error.html" title="bmw_err::Error"><code>bmw_err::Error</code></a> on failure.</p>
<ul>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.ArrayIndexOutOfBounds" title="bmw_err::ErrorKind::ArrayIndexOutOfBounds"><code>bmw_err::ErrorKind::ArrayIndexOutOfBounds</code></a> if this slab entry is
too big for this instance.</p>
</li>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.IllegalState" title="bmw_err::ErrorKind::IllegalState"><code>bmw_err::ErrorKind::IllegalState</code></a> if the <a href="trait.SlabAllocator.html#tymethod.init" title="crate::SlabAllocator::init"><code>crate::SlabAllocator::init</code></a>
function has not been called or this slab was not allocated.</p>
</li>
</ul>
<h5 id="examples-1"><a href="#examples-1">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code> <span class="kw">use</span> <span class="ident">bmw_err</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::slab_allocator</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::ConfigOption</span>::{<span class="ident">SlabSize</span>, <span class="ident">SlabCount</span>};

 <span class="kw">fn</span> <span class="ident">main</span>() -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Error</span><span class="op">&gt;</span> {
     <span class="comment">// instantiate a slab allocator with a slab count of 1,000.</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="macro">slab_allocator!</span>(<span class="ident">SlabSize</span>(<span class="number">1_000</span>), <span class="ident">SlabCount</span>(<span class="number">1_000</span>))<span class="question-mark">?</span>;

     <span class="comment">// borrow a mutable refernce</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">borrow_mut</span>();

     <span class="comment">// assert that there are 1,000 free slabs.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">1_000</span>);

     <span class="kw">let</span> <span class="ident">slab_id</span> <span class="op">=</span> {
         <span class="comment">// allocate a slab.</span>
         <span class="kw">let</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">allocate</span>()<span class="question-mark">?</span>;
         <span class="ident">slab</span>.<span class="ident">id</span>()
     };

     <span class="comment">// assert that the free count has decreased by 1.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">999</span>);


     <span class="comment">// free the slab that was allocated</span>
     <span class="ident">slabs</span>.<span class="ident">free</span>(<span class="ident">slab_id</span>)<span class="question-mark">?</span>;

     <span class="comment">// assert that the free count has returnred to the initial value of 1,000.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">1_000</span>);

     <span class="prelude-val">Ok</span>(())
 }</code></pre></div>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#662">source</a></div><h4 class="code-header">fn <a href="#tymethod.get" class="fnname">get</a>&lt;'a&gt;(&amp;'a self, id: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.Slab.html" title="struct bmw_util::Slab">Slab</a>&lt;'a&gt;, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Get an immutable reference to a slab that has previously been allocated by the
<a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a>. On success a <a href="struct.Slab.html" title="crate::Slab"><code>crate::Slab</code></a> is returned. On failure,
a <a href="../bmw_err/error/struct.Error.html" title="bmw_err::Error"><code>bmw_err::Error</code></a> is returned.</p>
<ul>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.ArrayIndexOutOfBounds" title="bmw_err::ErrorKind::ArrayIndexOutOfBounds"><code>bmw_err::ErrorKind::ArrayIndexOutOfBounds</code></a> if this slab entry is
too big for this instance.</p>
</li>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.IllegalState" title="bmw_err::ErrorKind::IllegalState"><code>bmw_err::ErrorKind::IllegalState</code></a> if the <a href="trait.SlabAllocator.html#tymethod.init" title="crate::SlabAllocator::init"><code>crate::SlabAllocator::init</code></a>
function has not been called or this slab was not allocated.</p>
</li>
</ul>
<h5 id="examples-2"><a href="#examples-2">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code> <span class="kw">use</span> <span class="ident">bmw_err</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_log</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::slab_allocator</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::ConfigOption</span>::{<span class="ident">SlabSize</span>,<span class="ident">SlabCount</span>};

 <span class="macro">info!</span>();

 <span class="kw">fn</span> <span class="ident">main</span>() -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Error</span><span class="op">&gt;</span> {
     <span class="comment">// instantiate a slab allocator with a slab count of 1,000.</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="macro">slab_allocator!</span>(<span class="ident">SlabCount</span>(<span class="number">1_000</span>), <span class="ident">SlabSize</span>(<span class="number">1_000</span>))<span class="question-mark">?</span>;
     
     <span class="comment">// borrow a mutable refernce</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">borrow_mut</span>();

     <span class="comment">// assert that there are 1,000 free slabs.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">1_000</span>);

     <span class="kw">let</span> <span class="ident">slab_id</span> <span class="op">=</span> {
         <span class="comment">// allocate a slab.</span>
         <span class="kw">let</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">allocate</span>()<span class="question-mark">?</span>;
         <span class="ident">slab</span>.<span class="ident">id</span>()
     };

     <span class="comment">// assert that the free count has decreased by 1.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">999</span>);


     <span class="comment">// get the slab that was allocated</span>
     <span class="kw">let</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">get</span>(<span class="ident">slab_id</span>)<span class="question-mark">?</span>;

     <span class="macro">info!</span>(<span class="string">&quot;slab data = {:?}&quot;</span>, <span class="ident">slab</span>.<span class="ident">get</span>())<span class="question-mark">?</span>;

     <span class="prelude-val">Ok</span>(())
 }</code></pre></div>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.get_mut" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#712">source</a></div><h4 class="code-header">fn <a href="#tymethod.get_mut" class="fnname">get_mut</a>&lt;'a&gt;(&amp;'a mut self, id: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.SlabMut.html" title="struct bmw_util::SlabMut">SlabMut</a>&lt;'a&gt;, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Get an mutable reference to a slab that has previously been allocated by the
<a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a>. On success a <a href="struct.SlabMut.html" title="crate::SlabMut"><code>crate::SlabMut</code></a> is returned. On failure,
a <a href="../bmw_err/error/struct.Error.html" title="bmw_err::Error"><code>bmw_err::Error</code></a> is returned.</p>
<ul>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.ArrayIndexOutOfBounds" title="bmw_err::ErrorKind::ArrayIndexOutOfBounds"><code>bmw_err::ErrorKind::ArrayIndexOutOfBounds</code></a> if this slab entry is
too big for this instance.</p>
</li>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.IllegalState" title="bmw_err::ErrorKind::IllegalState"><code>bmw_err::ErrorKind::IllegalState</code></a> if the <a href="trait.SlabAllocator.html#tymethod.init" title="crate::SlabAllocator::init"><code>crate::SlabAllocator::init</code></a>
function has not been called or this slab was not allocated.</p>
</li>
</ul>
<h5 id="examples-3"><a href="#examples-3">Examples</a></h5>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code> <span class="kw">use</span> <span class="ident">bmw_err</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_log</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::slab_allocator</span>;
 <span class="kw">use</span> <span class="ident">bmw_util::ConfigOption</span>::{<span class="ident">SlabSize</span>, <span class="ident">SlabCount</span>};

 <span class="macro">info!</span>();

 <span class="kw">fn</span> <span class="ident">main</span>() -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Error</span><span class="op">&gt;</span> {
     <span class="comment">// instantiate a slab allocator with a slab count of 1,000.</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="macro">slab_allocator!</span>(<span class="ident">SlabSize</span>(<span class="number">1_000</span>), <span class="ident">SlabCount</span>(<span class="number">1_000</span>))<span class="question-mark">?</span>;

     <span class="comment">// borrow a mutable refernce</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slabs</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">borrow_mut</span>();

     <span class="comment">// assert that there are 1,000 free slabs.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">1_000</span>);

     <span class="kw">let</span> <span class="ident">slab_id</span> <span class="op">=</span> {
         <span class="comment">// allocate a slab.</span>
         <span class="kw">let</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">allocate</span>()<span class="question-mark">?</span>;
         <span class="ident">slab</span>.<span class="ident">id</span>()
     };

     <span class="comment">// assert that the free count has decreased by 1.</span>
     <span class="macro">assert_eq!</span>(<span class="ident">slabs</span>.<span class="ident">free_count</span>()<span class="question-mark">?</span>, <span class="number">999</span>);


     <span class="comment">// get the slab that was allocated</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">slab</span> <span class="op">=</span> <span class="ident">slabs</span>.<span class="ident">get_mut</span>(<span class="ident">slab_id</span>)<span class="question-mark">?</span>;

     <span class="macro">info!</span>(<span class="string">&quot;slab data = {:?}&quot;</span>, <span class="ident">slab</span>.<span class="ident">get_mut</span>())<span class="question-mark">?</span>;

     <span class="prelude-val">Ok</span>(())
 }</code></pre></div>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.free_count" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#715">source</a></div><h4 class="code-header">fn <a href="#tymethod.free_count" class="fnname">free_count</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Returns the number of free slabs this <a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a> has remaining.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.slab_size" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#718">source</a></div><h4 class="code-header">fn <a href="#tymethod.slab_size" class="fnname">slab_size</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Returns the configured <code>slab_size</code> for this <a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a>.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.slab_count" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#721">source</a></div><h4 class="code-header">fn <a href="#tymethod.slab_count" class="fnname">slab_count</a>(&amp;self) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.usize.html">usize</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Returns the configured <code>slab_count</code> for this <a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a>.</p>
</div></details><details class="rustdoc-toggle" open><summary><div id="tymethod.init" class="method has-srclink"><div class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#725">source</a></div><h4 class="code-header">fn <a href="#tymethod.init" class="fnname">init</a>(&amp;mut self, config: <a class="struct" href="struct.SlabAllocatorConfig.html" title="struct bmw_util::SlabAllocatorConfig">SlabAllocatorConfig</a>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.63.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.unit.html">()</a>, <a class="struct" href="../bmw_err/error/struct.Error.html" title="struct bmw_err::error::Error">Error</a>&gt;</h4></div></summary><div class="docblock"><p>Initializes the <a href="trait.SlabAllocator.html" title="crate::SlabAllocator"><code>crate::SlabAllocator</code></a> with the given <code>config</code>. See
<a href="struct.SlabAllocatorConfig.html" title="crate::SlabAllocatorConfig"><code>crate::SlabAllocatorConfig</code></a> for further details.</p>
</div></details></div><h2 id="trait-implementations" class="small-section-header">Trait Implementations<a href="#trait-implementations" class="anchor"></a></h2><div id="trait-implementations-list"><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Clone" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#impl-Clone" class="anchor"></a><h3 class="code-header in-band">impl&lt;'clone&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="https://doc.rust-lang.org/1.63.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="trait.SlabAllocator.html" title="trait bmw_util::SlabAllocator">SlabAllocator</a> + 'clone&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#method.clone" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; Self</h4></section></summary><div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone_from" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/clone.rs.html#133-135">source</a></span><a href="#method.clone_from" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;</a>Self)</h4></section></summary><div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Clone-1" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#impl-Clone-1" class="anchor"></a><h3 class="code-header in-band">impl&lt;'clone&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="https://doc.rust-lang.org/1.63.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="trait.SlabAllocator.html" title="trait bmw_util::SlabAllocator">SlabAllocator</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + 'clone&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone-1" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#method.clone-1" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; Self</h4></section></summary><div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone_from-1" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/clone.rs.html#133-135">source</a></span><a href="#method.clone_from-1" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;</a>Self)</h4></section></summary><div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Clone-2" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#impl-Clone-2" class="anchor"></a><h3 class="code-header in-band">impl&lt;'clone&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="https://doc.rust-lang.org/1.63.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="trait.SlabAllocator.html" title="trait bmw_util::SlabAllocator">SlabAllocator</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'clone&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone-2" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#method.clone-2" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; Self</h4></section></summary><div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone_from-2" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/clone.rs.html#133-135">source</a></span><a href="#method.clone_from-2" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;</a>Self)</h4></section></summary><div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></details></div></details><details class="rustdoc-toggle implementors-toggle" open><summary><section id="impl-Clone-3" class="impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#impl-Clone-3" class="anchor"></a><h3 class="code-header in-band">impl&lt;'clone&gt; <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html" title="trait core::clone::Clone">Clone</a> for <a class="struct" href="https://doc.rust-lang.org/1.63.0/alloc/boxed/struct.Box.html" title="struct alloc::boxed::Box">Box</a>&lt;dyn <a class="trait" href="trait.SlabAllocator.html" title="trait bmw_util::SlabAllocator">SlabAllocator</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Send.html" title="trait core::marker::Send">Send</a> + <a class="trait" href="https://doc.rust-lang.org/1.63.0/core/marker/trait.Sync.html" title="trait core::marker::Sync">Sync</a> + 'clone&gt;</h3></section></summary><div class="impl-items"><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone-3" class="method trait-impl has-srclink"><span class="rightside"><a class="srclink" href="../src/bmw_util/types.rs.html#728">source</a></span><a href="#method.clone-3" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone" class="fnname">clone</a>(&amp;self) -&gt; Self</h4></section></summary><div class='docblock'><p>Returns a copy of the value. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#tymethod.clone">Read more</a></p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="method.clone_from-3" class="method trait-impl has-srclink"><span class="rightside"><span class="since" title="Stable since Rust version 1.0.0">1.0.0</span> · <a class="srclink" href="https://doc.rust-lang.org/1.63.0/src/core/clone.rs.html#133-135">source</a></span><a href="#method.clone_from-3" class="anchor"></a><h4 class="code-header">fn <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from" class="fnname">clone_from</a>(&amp;mut self, source: <a class="primitive" href="https://doc.rust-lang.org/1.63.0/std/primitive.reference.html">&amp;</a>Self)</h4></section></summary><div class='docblock'><p>Performs copy-assignment from <code>source</code>. <a href="https://doc.rust-lang.org/1.63.0/core/clone/trait.Clone.html#method.clone_from">Read more</a></p>
</div></details></div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div class="item-list" id="implementors-list"></div><script type="text/javascript" src="../implementors/bmw_util/types/trait.SlabAllocator.js" data-ignore-extern-crates="" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="bmw_util" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>