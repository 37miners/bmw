<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Macro to initialize the global slab allocator. It is important to note that this macro only affects the thread in which it is executed in and must be called separately in each thread that you wish to initialize the global slab allocator in. Also, the data structures, like [`crate::StaticHashtable`] and [`crate::StaticHashset`], will initialized this slab allocator with default values if this macro is not called first. Therefore, it makes sense to call this very soon after starting a thread that will use it. The slab allocator is initialized with `slab_size` and `slab_count` parameters respecitvely. `slab_size` is the size in bytes of slabs. The default value is 1_024 bytes. `slab_count` is the number of slabs to initialize. The default value is 10_240. The defaults will be used if this macro is not called."><meta name="keywords" content="rust, rustlang, rust-lang, init_slab_allocator"><title>init_slab_allocator in bmw_util - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../ayu.css" disabled><link rel="stylesheet" type="text/css" href="../dark.css" disabled><link rel="stylesheet" type="text/css" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc macro"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../bmw_util/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><h2 class="location"></h2>
    </nav>
    <nav class="sidebar"><a class="sidebar-logo" href="../bmw_util/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div>
        </a><div class="sidebar-elems"><h2 class="location"><a href="index.html">In bmw_util</a></h2></div></nav><main><div class="width-limiter"><div class="sub-container"><a class="sub-logo-container" href="../bmw_util/index.html"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></a><nav class="sub"><form class="search-form"><div class="search-container"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><button type="button" id="help-button" title="help">?</button><div id="settings-menu" tabindex="-1">
                                <a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div>
                        </div></form></nav></div><section id="main-content" class="content"><div class="main-heading">
    <h1 class="fqn"><span class="in-band">Macro <a href="index.html">bmw_util</a>::<wbr><a class="macro" href="#">init_slab_allocator</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></span></h1><span class="out-of-band"><a class="srclink" href="../src/bmw_util/macros.rs.html#63-76">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="docblock item-decl"><div class="example-wrap"><pre class="rust macro"><code><span class="macro">macro_rules!</span> <span class="ident">init_slab_allocator</span> {
    (<span class="macro-nonterminal">$</span><span class="macro-nonterminal">slab_size</span>:<span class="ident">expr</span>, <span class="macro-nonterminal">$</span><span class="macro-nonterminal">slab_count</span>:<span class="ident">expr</span>) =&gt; { ... };
}</code></pre></div>
</div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Macro to initialize the global slab allocator. It is important to note that
this macro only affects the thread in which it is executed in and must be called
separately in each thread that you wish to initialize the global slab allocator
in. Also, the data structures, like <a href="trait.StaticHashtable.html" title="crate::StaticHashtable"><code>crate::StaticHashtable</code></a> and
<a href="trait.StaticHashset.html" title="crate::StaticHashset"><code>crate::StaticHashset</code></a>, will initialized this slab allocator with default values
if this macro is not called first. Therefore, it makes sense to call this very soon
after starting a thread that will use it. The slab allocator is initialized with
<code>slab_size</code> and <code>slab_count</code> parameters respecitvely. <code>slab_size</code> is the size in bytes
of slabs. The default value is 1_024 bytes. <code>slab_count</code> is the number of slabs to
initialize. The default value is 10_240. The defaults will be used if this macro is
not called.</p>
<h2 id="errors"><a href="#errors">Errors</a></h2>
<p><a href="macro.init_slab_allocator.html" title="init_slab_allocator"><code>init_slab_allocator</code></a> returns a Ok(()) on success or returns an <a href="../bmw_err/error/struct.Error.html" title="bmw_err::Error"><code>bmw_err::Error</code></a>
if an error occurs.</p>
<ul>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.IllegalArgument" title="bmw_err::ErrorKind::IllegalArgument"><code>bmw_err::ErrorKind::IllegalArgument</code></a> if the <code>slab_size</code> is less than 48 bytes or
if <code>slab_count</code> is equal to 0.</p>
</li>
<li>
<p><a href="../bmw_err/error/enum.ErrorKind.html#variant.IllegalState" title="bmw_err::ErrorKind::IllegalState"><code>bmw_err::ErrorKind::IllegalState</code></a> if the thread local global slab allocator for this
thread has already been initialized.</p>
</li>
</ul>
<h2 id="examples"><a href="#examples">Examples</a></h2>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code> <span class="kw">use</span> <span class="ident">bmw_err</span>::<span class="kw-2">*</span>;
 <span class="kw">use</span> <span class="ident">bmw_util</span>::{<span class="ident">ctx</span>, <span class="ident">hashtable</span>, <span class="ident">init_slab_allocator</span>, <span class="ident">SlabAllocatorConfig</span>};

 <span class="kw">fn</span> <span class="ident">main</span>() -&gt; <span class="prelude-ty">Result</span><span class="op">&lt;</span>(), <span class="ident">Error</span><span class="op">&gt;</span> {
     <span class="comment">// create a context</span>
     <span class="kw">let</span> <span class="ident">ctx</span> <span class="op">=</span> <span class="macro">ctx!</span>();

     <span class="comment">// initialize the slab allocator for this thread with 25_000 128 byte entries</span>
     <span class="macro">init_slab_allocator!</span>(<span class="number">128</span>, <span class="number">25_000</span>);

     <span class="comment">// The hashtable will use this default thread local slab allocator</span>
     <span class="kw">let</span> <span class="kw-2">mut</span> <span class="ident">hashtable</span> <span class="op">=</span> <span class="macro">hashtable!</span>()<span class="question-mark">?</span>;

     <span class="ident">hashtable</span>.<span class="ident">insert</span>(<span class="ident">ctx</span>, <span class="kw-2">&amp;</span><span class="number">1</span>, <span class="kw-2">&amp;</span><span class="number">2</span>)<span class="question-mark">?</span>;
     <span class="comment">// ...</span>

     <span class="prelude-val">Ok</span>(())
 }</code></pre></div>
<p>See <a href="macro.slab_allocator.html" title="crate::slab_allocator"><code>crate::slab_allocator</code></a> for details on how to create a new slab allocator as opposed
to the global thread local slab allocator.</p>
</div></details></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="bmw_util" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.63.0 (4b91a6ea7 2022-08-08)" ></div>
</body></html>